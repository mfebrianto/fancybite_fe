"use strict";angular.module("fancybiteApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).run(["$rootScope",function(a){a.MENUBOOK_URI="/menubook/food_types.json",a.MENUBOOK_FOOD_TYPES_DELETE_URI="/menubook/food_types/delete.json",a.MENUBOOK_FOOD_URI="/menubook/foods.json",a.MENUBOOK_FOOD_DELETE_URI="/menubook/foods/delete.json"}]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/admins/food_types",{templateUrl:"views/admins/foodType.html",controller:"AdminsFoodTypeCtrl"}).when("/admins/foods",{templateUrl:"views/admins/food.html",controller:"AdminsFoodCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("fancybiteApp").controller("MainCtrl",["$scope","$http","$rootScope",function(a,b,c){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],a.foods=[],a.getAllFoodsFromMenuBook=function(){b.get(c.MENUBOOK_FOOD_URI).success(function(b){$.each(b,function(c){a.foods.push(b[c])})})},a.getAllFoodsFromMenuBook()}]),angular.module("fancybiteApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("fancybiteApp").controller("AdminsFoodTypeCtrl",["$scope","$rootScope","$http",function($scope,$rootScope,$http){$scope.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],$scope.foodTypes=[],$scope.getAllFoodTypesFromMenuBook=function(){$http.get($rootScope.MENUBOOK_URI).success(function(a){$.each(a,function(b){$scope.foodTypes.push(a[b])})})},$scope.initForm=function(){$scope.foodType={name:"",description:""}},$scope.getAllFoodTypesFromMenuBook(),$scope.initForm(),$scope.postFoodTypeToMenuBook=function(){var a=!1;return $.ajax({type:"POST",url:$rootScope.MENUBOOK_URI,data:{food_type:$scope.foodType},async:!1,success:function(){a=!0}}),a},$scope.deleteFoodTypeInMenuBook=function(a){var b=!1;return $.ajax({type:"POST",url:$rootScope.MENUBOOK_FOOD_TYPES_DELETE_URI,data:{food_type:{id:a}},async:!1,success:function(){b=!0}}),b},$scope.addRow=function(){var a=$scope.postFoodTypeToMenuBook();a&&($scope.foodTypes.push({id:$scope.foodType.id,name:$scope.foodType.name,description:$scope.foodType.description}),$scope.initForm())},$scope.removeRow=function(id){var deleteFoodTypeInMenuBook=$scope.deleteFoodTypeInMenuBook(id);if(deleteFoodTypeInMenuBook){for(var index=-1,comArr=eval($scope.foodTypes),i=0;i<comArr.length;i++)if(comArr[i].id===id){index=i;break}-1===index&&alert("Something gone wrong"),$scope.foodTypes.splice(index,1)}}}]),angular.module("fancybiteApp").directive("fileModel",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.fileModel),f=e.assign;c.bind("change",function(){b.$apply(function(){f(b,c[0].files[0])})})}}}]).service("fileUpload",["$http",function(a){this.uploadFileToUrl=function(b,c,d,e,f){var g=new FormData;g.append("food_image",b),g.append("name",d),g.append("description",e),g.append("price",f),a.put(c,g,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(){}).error(function(){})}}]).controller("AdminsFoodCtrl",["$scope","$rootScope","$http","fileUpload",function($scope,$rootScope,$http,fileUpload){$scope.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],$scope.initForm=function(){$scope.food={id:"",name:"",description:"",price:"",image:""},$("#myForm_file").val(""),$("#myForm_submit").val("submit")},$scope.cleanFoodTable=function(){$scope.foods=[]},$scope.getAllFoodsFromMenuBook=function(){$scope.cleanFoodTable(),$http.get($rootScope.MENUBOOK_FOOD_URI).success(function(a){$scope.foods=a})},$scope.getAllFoodsFromMenuBook(),$scope.initForm(),$scope.uploadFile=function(a){var b=$scope.myFile;console.log("file is "+JSON.stringify(b));var c="/menubook/foods/"+a+".json";fileUpload.uploadFileToUrl(b,c,$scope.food.name,$scope.food.description,$scope.food.price),$scope.initForm(),$scope.getAllFoodsFromMenuBook()},$scope.postFoodToMenuBook=function(){var a=!1;return $.ajax({type:"POST",url:$rootScope.MENUBOOK_FOOD_URI,data:{food:$scope.food},async:!1,success:function(){a=!0}}),a},$scope.addRow=function(){if(""!=$scope.food.id)$scope.uploadFile($scope.food.id);else{var a=$scope.postFoodToMenuBook();a&&$scope.foods.push({id:$scope.food.id,name:$scope.food.name,description:$scope.food.description,price:$scope.food.price})}$scope.initForm(),$scope.getAllFoodsFromMenuBook()},$scope.editRow=function(a,b,c,d){$scope.food={id:a,name:b,description:c,price:d},$("#myForm_submit").val("update")},$scope.deleteFoodInMenuBook=function(a){var b=!1;return $.ajax({type:"POST",url:$rootScope.MENUBOOK_FOOD_DELETE_URI,data:{food:{id:a}},async:!1,success:function(){b=!0}}),b},$scope.removeRow=function(id){var deleteFoodInMenuBook=$scope.deleteFoodInMenuBook(id);if(deleteFoodInMenuBook){for(var index=-1,comArr=eval($scope.foods),i=0;i<comArr.length;i++)if(comArr[i].id===id){index=i;break}-1===index&&alert("Something gone wrong"),$scope.foods.splice(index,1)}}}]),angular.module("fancybiteApp").factory("FoodFactory",["$http",function(a){var b="/menubook/food_types",c={};return c.getAllFoods=function(){return a.get(b+".json")},c}]);